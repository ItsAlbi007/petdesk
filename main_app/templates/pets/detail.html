{% extends 'base.html' %}
{% block content %}

<h3>Pet Details</h3>

<div class="row">
    <div class="col s6 col s6">
        <div class="card hoverable">
          <div class="card-content">
            <span class="card-title">{{ pet.name }}</span>
            <p>Species: {{ pet.species }}</p>
            <p>Description: {{ pet.description }}</p>
            <p>Owner: {{ pet.owner }}</p>
            <p>Age: {{ pet.age }}</p>
            <p>Comment: {{ pet.comment }}</p>
            <p>Doctor: {{ pet.user }}</p>
          </div>
          <div class="card-action">
            <a href="{% url 'pets_update' pet.id %}">Update</a>
            <a href="{% url 'pets_delete' pet.id %}">Delete</a>
          </div>
        </div>
    </div>
    <div class="col s6">
      <form action="{% url 'add_checkin' pet.id %}" method="POST">
          {% csrf_token %}
          <!-- render our inputs -->
          <!-- renders form inputs as p tags -->
          {{ checkin_form.as_p }}
          <input type="submit" class="btn" value="Add Checkin">
      </form>
      <table class="striped">
          <thead>
              <tr><th>Date</th><th>Room</th></tr>
          </thead>
          <tbody>
              {% for checkin in pet.checkin_set.all %}
                  <tr>
                      <td>{{checkin.date}}</td>
                      <td>{{checkin.get_room_display}}</td>
                      <td><a class="btn" href="{% url 'checkin_detail' checkin.id %}">Details</a></td>
                  </tr>
              {% endfor %}
          </tbody>
      </table>
  </div>
</div>
<script>
  // identify the element
  const dateEl = document.getElementById('id_date')
  // M is materialize's global variable
  M.Datepicker.init(dateEl, {
      format: 'yyyy-mm-dd',
      defaultDate: new Date(),
      setDefaultDate: true,
      autoClose: true
  })
  // here is where we'll render the dropdown (select)
  const selectEl = document.getElementById('id_room')
  M.FormSelect.init(selectEl)
</script>

{% endblock %}